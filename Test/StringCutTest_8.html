<html>
<style>
.board{
  border-style:solid;
  /* width:200px; */
  padding:5px;
}
</style>
<body>
<div id ='base'></div>
</body>
<script src="../library/jquery-3.2.1.min.js"></script>

<script>
$();
function AddDiv(addPlace,elementId,content,contentClass,append=true,type='div'){
  //addPlace=appendto id=?
  $addcontent=$('<'+type+' id='+elementId+'>'+content+'</'+type+'>').addClass(contentClass);
  if(append==true){
    $('#'+addPlace).append($addcontent);
  }else{
    $('#'+addPlace).prepend($addcontent);
  }
}

var st="{";
var ed="}";
var T = new String('a{A{A}11{SSS}12{{SSS}1{SSS}}SS}');
function LastIndexArray(_input,Key){
  for (k in _input){
    if (_input[_input.length-k-1]==Key){
      return(_input.length-k-1);
    }
  }
  console.log('???',_input,Key);
}

function findInArray(content,Key){
  var output= new Array(1);
  var block=new Array();
  var x = 0;
  var y =0;
  while(x!=-1 && y<200){
  output.push(content.indexOf(Key,output[output.length-1]+1));
  x=content.indexOf(Key,output[output.length-1]+1);
  y++;
};
output.shift();
return output
};

var Left=new Array();
var Right=new Array();
_Left=findInArray(T,st);
_Right=findInArray(T,ed);
console.log('L:',_Left,'R:',_Right);

function Matching(Left,Right){
  var Left=Left;
  var Right=Right;
  var temp=Right.length;
  var RightStack=new Array();
  var LeftStack=new Array();
  var All=Left.concat(Right);
  console.log(All);
  All.sort(function(a, b){return a - b});
console.log(All);
  var output=new Array();
  var outputFront=new Array//buffe for last arrays
  for (i in All) {
//    console.log('i=',All[i]);
    if(All[i]==Left[0]){
      LeftStack.push(Left.shift());
      RightStack.push(-2);
    }
    else if (All[i]==Right[0]){
      if (All[i]==30) {
        console.log(RightStack);
      }
      console.log(LastIndexArray(RightStack,-2),Right[Right.length-1]);
      RightStack[LastIndexArray(RightStack,-2)]=Right.shift();
      console.log('Right pop check',All[i],Right,RightStack);
    }else{
      console.log('?????=',All[i],Right[0],Left[0])
    }
  }
    return(RightStack);
  }




A=Matching(_Left,_Right);
console.log(A);

//read(A,'base',T);




</script>
</html>
