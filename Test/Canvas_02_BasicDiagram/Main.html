<html>

<style>
    .border {
        border-style: solid;
        border-color: black;

    }
</style>

<body style="margin:0;padding:0">
    <canvas id="MyCanvas" class='border' stroke='black'>

    </canvas>
</body>
<script src="./V_CanvStyle.js"></script>
<script src="./V_CanvDraw.js"></script>
<script src="./Graphic_Cal.js"></script>
<script src="./M_Element.js"></script>
<script src='./M_Node.js'></script>
<script src="./M_Layer.js"></script>
<script src="./M_Link.js"></script>
<script src="./M_Graphic.js"></script>
<script src="./M_Overall.js"></script>
<script src="./V_Draw.js"></script>
<script src="./C_EventHandler.js"></script>
<script src="./C_Event.js"></script>
<script src="./Board_event.js"></script>
<script src='./Controller.js'></script>
<script src='./Save.js'></script>




<script>

    // Initialization
    var Canvas = document.getElementById('MyCanvas');
    var magnetDistance = 100;
    var CanvQualityEnhanceVector = 1.5;
    var CanvQualityScaleVector =  (Canvas.width / window.innerWidth.width);

    Canvas.height = window.innerHeight * CanvQualityEnhanceVector;
    Canvas.width = window.innerWidth * CanvQualityEnhanceVector;
    Canvas.style.width = (window.innerWidth+ 'px');
    Canvas.style.heigh = (window.innerHeight + 'px');


    d = Canvas.getContext('2d');


    //======================================================================================

    diagram = new Layer;
    diagram.push(new element(10, 30, 30, 100, '0'));
    diagram.push(new element(50, 50, 100, 100, '1'));
    diagram.push(new element(200, 300, 50, 50, '2'));
    diagram.push(new element(500, 600, 200, 200, '3'));

    // diagram.element[0].node.left.push(diagram.element[1].node.right);
    // diagram.element[1].node.right.push(diagram.element[3].node.right);

    var selectBox = null;
    var Board = new Canv(d, diagram);
    Board.redraw();
    var eventListener = new EventHandler(Canvas);
    Save_();

    /*
    Canvas.onmousedown = function (e) {
        var onElement = Board.isOnElement(e);

        // on no selection status:
        if (!diagram.elementSelection) {

            if (onElement) {
                // click on element
                Draw_Select(onElement.element);// select element
                Draw_MoveElements(e);
                return;
            } else {
                Draw_SelectionBox(e); // call selection Box

            }
            //click on background nothing happen
        }


        // on selected status:
        if (diagram.elementSelection) {

            //click on elements control bar:
            var onNode = Board.isOnControl(e);
            if (onNode) {
                Connection_onMouseDown(e, onNode)
                //call element draw_connection function
                return;// end continue other condition
            }

            //click on background:
            if (!onElement) {
                //click on background:
                Board.resetSelect(); // reset selection
                Board.redraw();
                Draw_SelectionBox(e);
                return; // end continue other condition
            }

            if (onElement) {
                // click on element:
                if (onElement.element.selected) {

                    Draw_MoveElements(e);
                    return;
                } else {

                    Board.resetSelect();
                    Draw_Select(onElement.element);
                    Board.redraw();
                    Draw_MoveElements(e);
                    return;
                }
            }
        }


    }


    Canvas.ondblclick = function (onclick_e) {
        var onElement = Board.isOnElement(onclick_e);
        if (!onElement) {
            Draw_CreateElement(onclick_e);
            Board.redraw();
            //double click in element event
        }
    }


    Canvas.oncontextmenu = function (e) {
        var onElement = Board.isOnElement(e)
         if (onElement != undefined) {
            if (onElement.index == 0) {
                diagram.shift()
            } else {
                diagram.splice(onElement.index, onElement.index);
            }
            Board.redraw();
        }
        return false; // Cancel defalut right click menu
    }
    */
</script>

</html>